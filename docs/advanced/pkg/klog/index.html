<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.140.1">
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  klog
  #


  V() 级别
  #


  
      
          级别
          含义
      
  
  
      
          v=0
          Generally useful for this to always be visible to a cluster operator.
      
      
          v=1
          A reasonable default log level if you don&rsquo;t want verbosity.
      
      
          v=2
          Useful steady state information about the service and important log messages that may correlate to significant changes in the system.  This is the recommended default log level for most systems.
      
      
          v=3
          Extended information about changes.
      
      
          v=4
          Debug level verbosity.
      
      
          v=5
          Trace level verbosity.
      
      
          v=6
          Display requested resources.
      
      
          v=7
          Display HTTP request headers.
      
      
          v=8
          Display HTTP request contents.
      
      
          v=9
          Display HTTP request contents without truncation of contents.
      
  


  详细说明
  #


klog.V(0) - Generally useful for this to ALWAYS be visible to an operator

Programmer errors
Logging extra info about a panic
CLI argument handling


klog.V(1) - A reasonable default log level if you don&rsquo;t want verbosity.

Information about config (listening on X, watching Y)
Errors that repeat frequently that relate to conditions that can be corrected (pod detected as unhealthy)


klog.V(2) - Useful steady state information about the service and important log messages that may correlate to significant changes in the system. This is the recommended default log level for most systems.

Logging HTTP requests and their exit code
System state changing (killing pod)
Controller state change events (starting pods)
Scheduler log messages


klog.V(3) - Extended information about changes

More info about system state changes


klog.V(4) - Debug level verbosity

Logging in particularly thorny parts of code where you may want to come back later and check it


klog.V(5) - Trace level verbosity

Context to understand the steps leading up to errors and warnings
More information for troubleshooting reported issues



参考：">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://kingye.me/study-go/docs/advanced/pkg/klog/">
  <meta property="og:site_name" content="Go 学习笔记">
  <meta property="og:title" content="klog">
  <meta property="og:description" content="klog # V() 级别 # 级别 含义 v=0 Generally useful for this to always be visible to a cluster operator. v=1 A reasonable default log level if you don’t want verbosity. v=2 Useful steady state information about the service and important log messages that may correlate to significant changes in the system. This is the recommended default log level for most systems. v=3 Extended information about changes. v=4 Debug level verbosity. v=5 Trace level verbosity. v=6 Display requested resources. v=7 Display HTTP request headers. v=8 Display HTTP request contents. v=9 Display HTTP request contents without truncation of contents. 详细说明 # klog.V(0) - Generally useful for this to ALWAYS be visible to an operator Programmer errors Logging extra info about a panic CLI argument handling klog.V(1) - A reasonable default log level if you don’t want verbosity. Information about config (listening on X, watching Y) Errors that repeat frequently that relate to conditions that can be corrected (pod detected as unhealthy) klog.V(2) - Useful steady state information about the service and important log messages that may correlate to significant changes in the system. This is the recommended default log level for most systems. Logging HTTP requests and their exit code System state changing (killing pod) Controller state change events (starting pods) Scheduler log messages klog.V(3) - Extended information about changes More info about system state changes klog.V(4) - Debug level verbosity Logging in particularly thorny parts of code where you may want to come back later and check it klog.V(5) - Trace level verbosity Context to understand the steps leading up to errors and warnings More information for troubleshooting reported issues 参考：">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2021-06-23T17:37:16+08:00">
<title>klog | Go 学习笔记</title>
<link rel="manifest" href="/study-go/manifest.json">
<link rel="icon" href="/study-go/favicon.png" >
<link rel="canonical" href="https://kingye.me/study-go/docs/advanced/pkg/klog/">
<link rel="stylesheet" href="/study-go/book.min.45ab58199f84c9a33853fdef2e41664c57a49ca55c9badf2dd2dd071f39975a3.css" integrity="sha256-RatYGZ&#43;EyaM4U/3vLkFmTFeknKVcm63y3S3QcfOZdaM=" crossorigin="anonymous">
  <script defer src="/study-go/fuse.min.js"></script>
  <script defer src="/study-go/en.search.min.cff675cc4aead4e28c4ab07c7bb96b38e51862190ef3b050a8ab95db897ae4a3.js" integrity="sha256-z/Z1zErq1OKMSrB8e7lrOOUYYhkO87BQqKuV24l65KM=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/study-go/"><span>Go 学习笔记</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>




<ul>
  <li><a href="https://kingye.me" target="_blank" rel="noopener noreferrer">博客</a></li>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417021727.png" target="_blank" rel="noopener noreferrer">公众号</a></li>
  <li><a href="https://github.com/ikingye" target="_blank" rel="noopener noreferrer">Github</a></li>
  <li><a href="https://weibo.com/kingyip15215" target="_blank" rel="noopener noreferrer">微博</a></li>
  <li><a href="https://www.zhihu.com/people/wutongyip" target="_blank" rel="noopener noreferrer">知乎</a></li>
</ul>
<hr />








  



  
  <ul>
    
      
        <li>
          
  
  

  
    <span>第一部分 基础入门</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-cf26a2b65f20aeeda3cacf0d31bc9892" class="toggle"  />
    <label for="section-cf26a2b65f20aeeda3cacf0d31bc9892" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/" class="">1.1 语法</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8fc4e1a169d5d1ed76d609fe243e0067" class="toggle"  />
    <label for="section-8fc4e1a169d5d1ed76d609fe243e0067" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/type/" class="">1.1.1 数据类型</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6995ebaf8bf7c4f4f5c2f7cbdaaa7063" class="toggle"  />
    <label for="section-6995ebaf8bf7c4f4f5c2f7cbdaaa7063" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/type/error/" class="">error</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/ref/type/slice/" class="">切片</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/ref/type/string/" class="">字符串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/ref/type/array/" class="">数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-903e200364223546b4418c02f06eb32a" class="toggle"  />
    <label for="section-903e200364223546b4418c02f06eb32a" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/type/interface/" class="">Interface</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-05475f39ea7acf355beffd64d6328380" class="toggle"  />
    <label for="section-05475f39ea7acf355beffd64d6328380" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/type/channel/" class="">Chiannel</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f667d710022efdab26dd032143e13ea4" class="toggle"  />
    <label for="section-f667d710022efdab26dd032143e13ea4" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/type/map/" class="">Map</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b74f28be7f390435a6ddc867eda31244" class="toggle"  />
    <label for="section-b74f28be7f390435a6ddc867eda31244" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/keyword/" class="">1.1.2 关键字</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-91ef0b916beb2e673103f21c8529d38b" class="toggle"  />
    <label for="section-91ef0b916beb2e673103f21c8529d38b" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/keyword/defer/" class="">defer</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-fe5d4054ab40a9388275c406bfdabef2" class="toggle"  />
    <label for="section-fe5d4054ab40a9388275c406bfdabef2" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/keyword/for/" class="">for 和 range</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/ref/keyword/func/" class="">函数</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2b5bab33c305bc288a6ffea6baae611a" class="toggle"  />
    <label for="section-2b5bab33c305bc288a6ffea6baae611a" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/keyword/func/init/" class="">init</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/ref/keyword/func/receiver/" class="">Receiver</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6e1b8572d9a7726f06aa28d12aa20cc8" class="toggle"  />
    <label for="section-6e1b8572d9a7726f06aa28d12aa20cc8" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/keyword/make/" class="">make</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6e5b8c5cfd9952241c043eeea9146ee6" class="toggle"  />
    <label for="section-6e5b8c5cfd9952241c043eeea9146ee6" class="flex justify-between">
      <a href="/study-go/docs/basic/ref/keyword/select/" class="">select</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-85397eb26451fc3d656caf9aa8eea957" class="toggle"  />
    <label for="section-85397eb26451fc3d656caf9aa8eea957" class="flex justify-between">
      <a href="/study-go/docs/basic/std/" class="">1.2 标准库</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-501293d2e27d7c8de6445498afa117ae" class="toggle"  />
    <label for="section-501293d2e27d7c8de6445498afa117ae" class="flex justify-between">
      <a href="/study-go/docs/basic/std/sort/" class="">sort</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-aa776ed5233dfe83c839a82873cde28d" class="toggle"  />
    <label for="section-aa776ed5233dfe83c839a82873cde28d" class="flex justify-between">
      <a href="/study-go/docs/basic/std/context/" class="">context</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b5f0a33d9fbb59c688059280b417615e" class="toggle"  />
    <label for="section-b5f0a33d9fbb59c688059280b417615e" class="flex justify-between">
      <a href="/study-go/docs/basic/std/format/" class="">格式化输出</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-858e75705b059b70b5cc0cb1a392c87c" class="toggle"  />
    <label for="section-858e75705b059b70b5cc0cb1a392c87c" class="flex justify-between">
      <a href="/study-go/docs/basic/std/io/" class="">io</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-35db8cb790005717608e58bfeb15d85f" class="toggle"  />
    <label for="section-35db8cb790005717608e58bfeb15d85f" class="flex justify-between">
      <a href="/study-go/docs/basic/std/net/" class="">net</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a49267c9e55cc7ac8b97bddfbc517659" class="toggle"  />
    <label for="section-a49267c9e55cc7ac8b97bddfbc517659" class="flex justify-between">
      <a href="/study-go/docs/basic/std/signal/" class="">signal</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9b28a0967ba2a32d2009aafd5f5f9ad1" class="toggle"  />
    <label for="section-9b28a0967ba2a32d2009aafd5f5f9ad1" class="flex justify-between">
      <a href="/study-go/docs/basic/std/sync/" class="">sync</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-740e5e0f3012abbd6afbd6c63b24b299" class="toggle"  />
    <label for="section-740e5e0f3012abbd6afbd6c63b24b299" class="flex justify-between">
      <a href="/study-go/docs/basic/std/strings/" class="">time</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5be4090bbd164052e09ead66e60a38ce" class="toggle"  />
    <label for="section-5be4090bbd164052e09ead66e60a38ce" class="flex justify-between">
      <a href="/study-go/docs/basic/std/time/" class="">time</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8912eace3ae26a10ec6a7d7f77f73c95" class="toggle"  />
    <label for="section-8912eace3ae26a10ec6a7d7f77f73c95" class="flex justify-between">
      <a href="/study-go/docs/basic/spec/" class="">1.3 编程规范</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8437a105c6e7fbf77a115319ec34d2f0" class="toggle"  />
    <label for="section-8437a105c6e7fbf77a115319ec34d2f0" class="flex justify-between">
      <a href="/study-go/docs/basic/others/" class="">1.4 其他</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-fec70b728db077c65ab1452db2929a79" class="toggle"  />
    <label for="section-fec70b728db077c65ab1452db2929a79" class="flex justify-between">
      <a href="/study-go/docs/basic/others/quick/" class="">Go 快速上手</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-836703fcedaa005754288a32c6d9ba6b" class="toggle"  />
    <label for="section-836703fcedaa005754288a32c6d9ba6b" class="flex justify-between">
      <a href="/study-go/docs/basic/others/pros-and-cons/" class="">优劣</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/others/gobuild/" class="">Go build</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/others/gomod/" class="">Go Modules</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/others/gopls/" class="">gopls</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/others/pm/" class="">包管理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/basic/others/compile/" class="">编译</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7bcd44a23c5090c8cd4571cfb3a46a76" class="toggle"  />
    <label for="section-7bcd44a23c5090c8cd4571cfb3a46a76" class="flex justify-between">
      <a href="/study-go/docs/basic/others/command/" class="">Go 命令</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b455fda431bf18f1c1f29ceb0e873707" class="toggle"  />
    <label for="section-b455fda431bf18f1c1f29ceb0e873707" class="flex justify-between">
      <a href="/study-go/docs/basic/others/command/install/" class="">安装</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6a596f3f6f240a9312ce04a989a61a7f" class="toggle"  />
    <label for="section-6a596f3f6f240a9312ce04a989a61a7f" class="flex justify-between">
      <a href="/study-go/docs/basic/others/history/" class="">历史</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-dd07e4000a7cbe35560cd5836896be98" class="toggle"  />
    <label for="section-dd07e4000a7cbe35560cd5836896be98" class="flex justify-between">
      <a href="/study-go/docs/basic/others/plugin/" class="">Go 插件系统</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6a97dd977285d401b99cbb086b793113" class="toggle"  />
    <label for="section-6a97dd977285d401b99cbb086b793113" class="flex justify-between">
      <a href="/study-go/docs/basic/others/goroutine/" class="">goroutine</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-03ff83c59e29325546629824c988535d" class="toggle"  />
    <label for="section-03ff83c59e29325546629824c988535d" class="flex justify-between">
      <a href="/study-go/docs/basic/others/version/" class="">版本</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>第二部分 进阶实战</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-70922a3b1ab657008b9130da19418da8" class="toggle"  />
    <label for="section-70922a3b1ab657008b9130da19418da8" class="flex justify-between">
      <a href="/study-go/docs/advanced/pattern/" class="">2.1 设计模式</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-30cd0f4cc17fdb0776ce429cc199abfa" class="toggle"  />
    <label for="section-30cd0f4cc17fdb0776ce429cc199abfa" class="flex justify-between">
      <a href="/study-go/docs/advanced/algs/" class="">2.2 算法实现</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3407c0075d7e1358acc2b8d2cd4ee640" class="toggle" checked />
    <label for="section-3407c0075d7e1358acc2b8d2cd4ee640" class="flex justify-between">
      <a href="/study-go/docs/advanced/pkg/" class="">2.3 常用库</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8e56e3a4b42ca5c1a9641c14b3e3d168" class="toggle"  />
    <label for="section-8e56e3a4b42ca5c1a9641c14b3e3d168" class="flex justify-between">
      <a href="/study-go/docs/advanced/pkg/cobra/" class="">cobra</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b208f828541038f587faae823e932095" class="toggle" checked />
    <label for="section-b208f828541038f587faae823e932095" class="flex justify-between">
      <a href="/study-go/docs/advanced/pkg/klog/" class="active">klog</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f823e7e1e006aeb718633221b06f9b6d" class="toggle"  />
    <label for="section-f823e7e1e006aeb718633221b06f9b6d" class="flex justify-between">
      <a href="/study-go/docs/advanced/snippet/" class="">2.4 代码片段</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7de94f625308567b0f182d7cf38f991a" class="toggle"  />
    <label for="section-7de94f625308567b0f182d7cf38f991a" class="flex justify-between">
      <a href="/study-go/docs/advanced/test/" class="">2.5 测试</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-855b28cf7ef76983806d5c935a56d1ab" class="toggle"  />
    <label for="section-855b28cf7ef76983806d5c935a56d1ab" class="flex justify-between">
      <a href="/study-go/docs/advanced/prof/" class="">2.6 性能</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-52bf9c0157813674b548f1bce7bcdb36" class="toggle"  />
    <label for="section-52bf9c0157813674b548f1bce7bcdb36" class="flex justify-between">
      <a href="/study-go/docs/advanced/frame/" class="">2.7 框架</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0b43069f47deae14e320f38cab0ec6ae" class="toggle"  />
    <label for="section-0b43069f47deae14e320f38cab0ec6ae" class="flex justify-between">
      <a href="/study-go/docs/advanced/frame/beego/" class="">Beego</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>第三部分 设计与实现</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5d55dfdebbda4ae0010fc4951ce81e7f" class="toggle"  />
    <label for="section-5d55dfdebbda4ae0010fc4951ce81e7f" class="flex justify-between">
      <a href="/study-go/docs/design/type/" class="">3.1 数据类型</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ea1e6ba0016587050d8e7571c5aa9ab0" class="toggle"  />
    <label for="section-ea1e6ba0016587050d8e7571c5aa9ab0" class="flex justify-between">
      <a href="/study-go/docs/design/type/type/" class="">类型系统</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d769b31c004a8a420e09e8207d350c86" class="toggle"  />
    <label for="section-d769b31c004a8a420e09e8207d350c86" class="flex justify-between">
      <a href="/study-go/docs/design/keyword/" class="">3.2 关键字</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f64c3a979d0515a193bd91464ad97bd7" class="toggle"  />
    <label for="section-f64c3a979d0515a193bd91464ad97bd7" class="flex justify-between">
      <a href="/study-go/docs/design/keyword/interface/" class="">interface</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ebca84eadd201ae9c1d26f2472564746" class="toggle"  />
    <label for="section-ebca84eadd201ae9c1d26f2472564746" class="flex justify-between">
      <a href="/study-go/docs/design/runtime/" class="">3.3 运行时</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-15069cec777c6e5c864e9ce29658240c" class="toggle"  />
    <label for="section-15069cec777c6e5c864e9ce29658240c" class="flex justify-between">
      <a href="/study-go/docs/design/runtime/init/" class="">Go 初始化</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e52f9b3f06eae4470b308876fedb24c6" class="toggle"  />
    <label for="section-e52f9b3f06eae4470b308876fedb24c6" class="flex justify-between">
      <a href="/study-go/docs/design/runtime/scheduling/" class="">Go 调度</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7bf7fa5ee04ceb63938717a3b17cd2e7" class="toggle"  />
    <label for="section-7bf7fa5ee04ceb63938717a3b17cd2e7" class="flex justify-between">
      <a href="/study-go/docs/design/runtime/gc/" class="">GC</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4f0ffaafba38159272629206bdb4b5bc" class="toggle"  />
    <label for="section-4f0ffaafba38159272629206bdb4b5bc" class="flex justify-between">
      <a href="/study-go/docs/design/runtime/concurrent/" class="">并发</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/study-go/docs/design/code/" class="">3.7 源码分析</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5aa83432328c738e4a45003c577aa54d" class="toggle"  />
    <label for="section-5aa83432328c738e4a45003c577aa54d" class="flex justify-between">
      <a href="/study-go/docs/design/code/1.0.0/" class="">1.0.0</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3c8139a2e506f7115d19c36cfe592298" class="toggle"  />
    <label for="section-3c8139a2e506f7115d19c36cfe592298" class="flex justify-between">
      <a href="/study-go/docs/design/code/1.5.0/" class="">1.5.0</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>第四部分 附录</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a07fef98452506b80b867d121d3a2164" class="toggle"  />
    <label for="section-a07fef98452506b80b867d121d3a2164" class="flex justify-between">
      <a href="/study-go/docs/appendix/tutorial/" class="">4.1 教程</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4b89657782ab0cb5c9404691f696e2a4" class="toggle"  />
    <label for="section-4b89657782ab0cb5c9404691f696e2a4" class="flex justify-between">
      <a href="/study-go/docs/appendix/interview/" class="">4.2 面试题</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f71a573a8e93fb879a514522fb08b820" class="toggle"  />
    <label for="section-f71a573a8e93fb879a514522fb08b820" class="flex justify-between">
      <a href="/study-go/docs/appendix/attention/" class="">4.3 关注项目</a>
    </label>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-109ca1f1db2d61fab34851e9ec713995" class="toggle"  />
    <label for="section-109ca1f1db2d61fab34851e9ec713995" class="flex justify-between">
      <a href="/study-go/docs/appendix/gossip/" class="">4.4 一些八卦</a>
    </label>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>














<hr />
<ul>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png" target="_blank" rel="noopener noreferrer">微信</a></li>
  <li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=EUhzg0UwUksxpQnwEmPngRLezlC6qrnn&jump_from=webapi" target="_blank" rel="noopener noreferrer"><img src="//pub.idqqimg.com/wpa/images/group.png"></a></li>
</ul>


</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/study-go/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>klog</strong>

  <label for="toc-control">
    
    <img src="/study-go/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#v-级别">V() 级别</a>
      <ul>
        <li><a href="#详细说明">详细说明</a></li>
      </ul>
    </li>
    <li><a href="#verbose-函数列表">Verbose 函数列表</a></li>
    <li><a href="#注意事项">注意事项</a>
      <ul>
        <li><a href="#使用-infos-infosdepth-errors-errorsdepth">使用 Infos, InfoSDepth, ErrorS, ErrorSDepth</a></li>
        <li><a href="#不要用-fatal">不要用 Fatal()</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article id="article" class="markdown"><h1 id="klog">
  klog
  <a class="anchor" href="#klog">#</a>
</h1>
<h2 id="v-级别">
  V() 级别
  <a class="anchor" href="#v-%e7%ba%a7%e5%88%ab">#</a>
</h2>
<table>
  <thead>
      <tr>
          <th>级别</th>
          <th>含义</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>v=0</code></td>
          <td>Generally useful for this to <em>always</em> be visible to a cluster operator.</td>
      </tr>
      <tr>
          <td><code>v=1</code></td>
          <td>A reasonable default log level if you don&rsquo;t want verbosity.</td>
      </tr>
      <tr>
          <td><code>v=2</code></td>
          <td>Useful steady state information about the service and important log messages that may correlate to significant changes in the system. <br> This is the recommended default log level for most systems.</td>
      </tr>
      <tr>
          <td><code>v=3</code></td>
          <td>Extended information about changes.</td>
      </tr>
      <tr>
          <td><code>v=4</code></td>
          <td>Debug level verbosity.</td>
      </tr>
      <tr>
          <td><code>v=5</code></td>
          <td>Trace level verbosity.</td>
      </tr>
      <tr>
          <td><code>v=6</code></td>
          <td>Display requested resources.</td>
      </tr>
      <tr>
          <td><code>v=7</code></td>
          <td>Display HTTP request headers.</td>
      </tr>
      <tr>
          <td><code>v=8</code></td>
          <td>Display HTTP request contents.</td>
      </tr>
      <tr>
          <td><code>v=9</code></td>
          <td>Display HTTP request contents without truncation of contents.</td>
      </tr>
  </tbody>
</table>
<h3 id="详细说明">
  详细说明
  <a class="anchor" href="#%e8%af%a6%e7%bb%86%e8%af%b4%e6%98%8e">#</a>
</h3>
<ul>
<li>klog.V(0) - Generally useful for this to ALWAYS be visible to an operator
<ul>
<li>Programmer errors</li>
<li>Logging extra info about a panic</li>
<li>CLI argument handling</li>
</ul>
</li>
<li>klog.V(1) - A reasonable default log level if you don&rsquo;t want verbosity.
<ul>
<li>Information about config (listening on X, watching Y)</li>
<li>Errors that repeat frequently that relate to conditions that can be corrected (pod detected as unhealthy)</li>
</ul>
</li>
<li>klog.V(2) - Useful steady state information about the service and important log messages that may correlate to significant changes in the system. This is the recommended default log level for most systems.
<ul>
<li>Logging HTTP requests and their exit code</li>
<li>System state changing (killing pod)</li>
<li>Controller state change events (starting pods)</li>
<li>Scheduler log messages</li>
</ul>
</li>
<li>klog.V(3) - Extended information about changes
<ul>
<li>More info about system state changes</li>
</ul>
</li>
<li>klog.V(4) - Debug level verbosity
<ul>
<li>Logging in particularly thorny parts of code where you may want to come back later and check it</li>
</ul>
</li>
<li>klog.V(5) - Trace level verbosity
<ul>
<li>Context to understand the steps leading up to errors and warnings</li>
<li>More information for troubleshooting reported issues</li>
</ul>
</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-instrumentation/logging.md">Logging Conventions</a></li>
<li><a href="https://github.com/kubernetes/klog/blob/4c895e832e858e50ba4d0bda3a0b764481292737/klog.go#L1283">V function, Verbose</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// V reports whether verbosity at the call site is at least the requested level.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The returned value is a struct of type Verbose, which implements Info, Infoln
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// and Infof. These methods will write to the Info log if called.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Thus, one may write either
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//	if glog.V(2).Enabled() { klog.Info(&#34;log this&#34;) }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// or
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//	klog.V(2).Info(&#34;log this&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The second form is shorter but the first is cheaper if logging is off because it does
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// not evaluate its arguments.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Whether an individual call to V generates a log record depends on the setting of
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// the -v and -vmodule flags; both are off by default. The V call will log if its level
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// is less than or equal to the value of the -v flag, or alternatively if its level is
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// less than or equal to the value of the -vmodule pattern matching the source file
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// containing the call.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">V</span>(<span style="color:#a6e22e">level</span> <span style="color:#a6e22e">Level</span>) <span style="color:#a6e22e">Verbose</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// This function tries hard to be cheap unless there&#39;s work to do.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// The fast path is two atomic loads and compares.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Here is a cheap but safe test to see if V logging is enabled globally.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">verbosity</span>.<span style="color:#a6e22e">get</span>() <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">level</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">newVerbose</span>(<span style="color:#a6e22e">level</span>, <span style="color:#66d9ef">true</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// It&#39;s off globally but vmodule may still be set.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Here is another cheap but safe test to see if vmodule is enabled.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">atomic</span>.<span style="color:#a6e22e">LoadInt32</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filterLength</span>) &gt; <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Now we need a proper lock to use the logging structure. The pcs field
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#75715e">// is shared so we must lock before accessing it. This is fairly expensive,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#75715e">// but if V logging is enabled we&#39;re slow anyway.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">Lock</span>()
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">mu</span>.<span style="color:#a6e22e">Unlock</span>()
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">Callers</span>(<span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">pcs</span>[:]) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">newVerbose</span>(<span style="color:#a6e22e">level</span>, <span style="color:#66d9ef">false</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">v</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">vmap</span>[<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">pcs</span>[<span style="color:#ae81ff">0</span>]]
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> !<span style="color:#a6e22e">ok</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">v</span> = <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">setV</span>(<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">pcs</span>[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">newVerbose</span>(<span style="color:#a6e22e">level</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">level</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">newVerbose</span>(<span style="color:#a6e22e">level</span>, <span style="color:#66d9ef">false</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="verbose-函数列表">
  Verbose 函数列表
  <a class="anchor" href="#verbose-%e5%87%bd%e6%95%b0%e5%88%97%e8%a1%a8">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">Enabled</span>() <span style="color:#66d9ef">bool</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">Info</span>(<span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">Infoln</span>(<span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">Infof</span>(<span style="color:#a6e22e">format</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">InfoS</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">keysAndValues</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">Error</span>(<span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>, <span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#a6e22e">Verbose</span>) <span style="color:#a6e22e">ErrorS</span>(<span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>, <span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">keysAndValues</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span></code></pre></div><hr>
<h2 id="注意事项">
  注意事项
  <a class="anchor" href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9">#</a>
</h2>
<h3 id="使用-infos-infosdepth-errors-errorsdepth">
  使用 Infos, InfoSDepth, ErrorS, ErrorSDepth
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8-infos-infosdepth-errors-errorsdepth">#</a>
</h3>
<ul>
<li><code>klog.Infof</code>, <code>klog.Info</code>, <code>klog.Infoln</code> -&gt; <code>klog.InfoS</code></li>
<li><code>klog.InfoDepth</code> -&gt; <code>klog.InfoSDepth</code></li>
<li><code>klog.V(N).Infof</code>, <code>klog.V(N).Info</code>, <code>klog.V(N).Infoln</code> -&gt; <code>klog.V(N).InfoS</code></li>
<li><code>klog.Warning</code>, <code>klog.Warningf</code>, <code>klog.Warningln</code> -&gt; <code>klog.InfoS</code></li>
<li><code>klog.WarningDepth</code> -&gt; <code>klog.InfoSDepth</code></li>
<li><code>klog.Error</code>, <code>klog.Errorf</code>, <code>klog.Errorln</code> -&gt; <code>klog.ErrorS</code></li>
<li><code>klog.ErrorDepth</code> -&gt; <code>klog.ErrorSDepth</code></li>
<li><code>klog.Fatal</code>, <code>klog.Fatalf</code>, <code>klog.Fatalln</code> -&gt; <code>klog.ErrorS</code> followed by <code>os.Exit(1)</code></li>
<li><code>klog.FatalDepth</code> -&gt; <code>klog.ErrorDepth</code> followed by <code>os.Exit(1)</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Info logs to the INFO log.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Arguments are handled in the manner of fmt.Print; a newline is appended if missing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Info</span>(<span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">logging</span>.print(<span style="color:#a6e22e">infoLog</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">logr</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filter</span>, <span style="color:#a6e22e">args</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// InfoDepth acts as Info but uses depth to determine which call frame to log.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// InfoDepth(0, &#34;msg&#34;) is the same as Info(&#34;msg&#34;).
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">InfoDepth</span>(<span style="color:#a6e22e">depth</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">printDepth</span>(<span style="color:#a6e22e">infoLog</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">logr</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filter</span>, <span style="color:#a6e22e">depth</span>, <span style="color:#a6e22e">args</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Infoln logs to the INFO log.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Arguments are handled in the manner of fmt.Println; a newline is always appended.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Infoln</span>(<span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">logging</span>.println(<span style="color:#a6e22e">infoLog</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">logr</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filter</span>, <span style="color:#a6e22e">args</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Infof logs to the INFO log.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Arguments are handled in the manner of fmt.Printf; a newline is appended if missing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Infof</span>(<span style="color:#a6e22e">format</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">printf</span>(<span style="color:#a6e22e">infoLog</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">logr</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filter</span>, <span style="color:#a6e22e">format</span>, <span style="color:#a6e22e">args</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// InfoS structured logs to the INFO log.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The msg argument used to add constant description to the log line.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The key/value pairs would be join by &#34;=&#34; ; a newline is always appended.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Basic examples:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// &gt;&gt; klog.InfoS(&#34;Pod status updated&#34;, &#34;pod&#34;, &#34;kubedns&#34;, &#34;status&#34;, &#34;ready&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// output:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// &gt;&gt; I1025 00:15:15.525108       1 controller_utils.go:116] &#34;Pod status updated&#34; pod=&#34;kubedns&#34; status=&#34;ready&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">InfoS</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">keysAndValues</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">infoS</span>(<span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">logr</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filter</span>, <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">msg</span>, <span style="color:#a6e22e">keysAndValues</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// if loggr is specified, will call loggr.Info, otherwise output with logging module.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">l</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">loggingT</span>) <span style="color:#a6e22e">infoS</span>(<span style="color:#a6e22e">loggr</span> <span style="color:#a6e22e">logr</span>.<span style="color:#a6e22e">Logger</span>, <span style="color:#a6e22e">filter</span> <span style="color:#a6e22e">LogFilter</span>, <span style="color:#a6e22e">depth</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">keysAndValues</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">filter</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">msg</span>, <span style="color:#a6e22e">keysAndValues</span> = <span style="color:#a6e22e">filter</span>.<span style="color:#a6e22e">FilterS</span>(<span style="color:#a6e22e">msg</span>, <span style="color:#a6e22e">keysAndValues</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">loggr</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">loggr</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#a6e22e">msg</span>, <span style="color:#a6e22e">keysAndValues</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">printS</span>(<span style="color:#66d9ef">nil</span>, <span style="color:#a6e22e">infoLog</span>, <span style="color:#a6e22e">depth</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">msg</span>, <span style="color:#a6e22e">keysAndValues</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// logr.Logger.Info
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// https://github.com/go-logr/logr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Info logs a non-error message with the given key/value pairs as context.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The msg argument should be used to add some constant description to
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// the log line.  The key/value pairs can then be used to add additional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// variable information.  The key/value pairs should alternate string
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// keys and arbitrary values.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">Info</span>(<span style="color:#a6e22e">msg</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">keysAndValues</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{})
</span></span></code></pre></div><p>参考：</p>
<ul>
<li><a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-instrumentation/migration-to-structured-logging.md#structured-logging-in-kubernetes">Structured Logging migration instructions</a></li>
</ul>
<h3 id="不要用-fatal">
  不要用 Fatal()
  <a class="anchor" href="#%e4%b8%8d%e8%a6%81%e7%94%a8-fatal">#</a>
</h3>
<p><code>klog.Fatal()</code> 打印日志后，会调用 <code>os.Exit(255)</code></p>
<p>应该改用 <code>klog.ErrorS()</code>，再<strong>自己调用</strong> <code>os.Exit(255)</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// Fatal logs to the FATAL, ERROR, WARNING, and INFO logs,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// including a stack trace of all running goroutines, then calls os.Exit(255).
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// Arguments are handled in the manner of fmt.Print; a newline is appended if missing.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">args</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">interface</span>{}) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">logging</span>.print(<span style="color:#a6e22e">fatalLog</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">logr</span>, <span style="color:#a6e22e">logging</span>.<span style="color:#a6e22e">filter</span>, <span style="color:#a6e22e">args</span><span style="color:#f92672">...</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>参考：<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-instrumentation/migration-to-structured-logging.md#replacing-fatal-calls">Replacing Fatal calls</a></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/ikingye/study-go/commit/d9ffe6d7f831f1833c970afc2f8132686702a1bc" title='Last modified by yewang | 2021-06-23' target="_blank" rel="noopener">
      <img src="/study-go/svg/calendar.svg" class="book-icon" alt="" />
      <span>2021-06-23</span>
    </a>
  </div>




</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        <div>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <p><span id="busuanzi_container_page_pv">本文访问量 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> 次</span></p>
    <p><span id="busuanzi_container_site_pv">本站总访问量 <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span> 次</span></p>
    <p><span id="busuanzi_container_site_uv">本站总访客数 <span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span> 人</span></p>
</div>





      </footer>

      
  
  <div class="book-comments">
<script src="https://utteranc.es/client.js"
  repo="ikingye/study-go"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>

<div id="footer">
  <p>
    <a href="https://kingye.me">叶王</a> &copy; 2013-2024
    版权所有。如果本文档对你有所帮助，可以<a
      href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200428110046.png"
      target="_blank"
      rel="noopener noreferrer"
      >请作者喝饮料</a
    >。
  </p>
</div>

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#v-级别">V() 级别</a>
      <ul>
        <li><a href="#详细说明">详细说明</a></li>
      </ul>
    </li>
    <li><a href="#verbose-函数列表">Verbose 函数列表</a></li>
    <li><a href="#注意事项">注意事项</a>
      <ul>
        <li><a href="#使用-infos-infosdepth-errors-errorsdepth">使用 Infos, InfoSDepth, ErrorS, ErrorSDepth</a></li>
        <li><a href="#不要用-fatal">不要用 Fatal()</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












